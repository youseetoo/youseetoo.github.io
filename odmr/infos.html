<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NV Experimente</title>

  <!-- Bootstrap 5 -->
  <!-- Bootstrap 5 -->
  <script>
    // Automatic Bootstrap loading: Use CDN for development, local for ESP32
    (function() {
      const isLocalDevice = window.location.hostname === '192.168.4.1' || 
                           window.location.hostname.includes('ODMR_') || 
                           window.location.protocol === 'file:';
      
      if (isLocalDevice) {
        // Load from ESP32 local server
        document.write('<link href="/bootstrap.min.css" rel="stylesheet">');
      } else {
        // Load from CDN for development
        document.write('<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">');
      }
    })();
  </script>

  <!-- Brand palette ---------------------------------------------------------->
  <style>
    :root{
      --uc2-blue:       #023773;  /* primary   */
      --uc2-green:      #85b918;  /* success   */
      --uc2-turquoise:  #1f9c7c;  /* info      */
      --uc2-light:      #faf9f9;  /* body bg   */
      --uc2-grey:       #999999;  /* muted txt */
    }
    body           { background: var(--uc2-light); color: var(--uc2-grey); }
    h1,h2,h3,h4,h5 { color: var(--uc2-blue); }
    /* navbar */
    .navbar         { background: var(--uc2-blue); }
    .navbar-brand,
    .navbar-nav .nav-link { color:#fff; }
    .navbar-nav .nav-link.active{ color: var(--uc2-green); }
    .navbar-nav .nav-link:hover{ color: var(--uc2-turquoise); }
    /* links in text */
    a{ color: var(--uc2-blue); }
    a:hover{ color: var(--uc2-turquoise); }
    footer{ background: var(--uc2-blue); color:#fff; }
  </style>
</head>

<body>
  <!-- ‚ñë‚ñë Navbar ‚ñë‚ñë----------------------------------------------------------- -->
  <nav class="navbar navbar-expand-lg shadow-sm mb-4">
    <div class="container">
      <a class="navbar-brand fw-bold" href="index.html">NV-Experimente</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
              data-bs-target="#nvNav" aria-controls="nvNav" aria-expanded="false">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="nvNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html" data-lang-key="nav_start">Start</a></li>
          <li class="nav-item"><a class="nav-link" href="messung.html" data-lang-key="nav_measurement_device">Messung (on Device)</a></li>
          <li class="nav-item" id="webSerialNavItem"><a class="nav-link" href="messung_webserial.html" data-lang-key="nav_measurement_webserial">Messung (WebSerial)</a></li>
          <li class="nav-item"><a class="nav-link" href="justage.html" data-lang-key="nav_alignment">Justage</a></li>
          <li class="nav-item"><a class="nav-link active" href="infos.html" data-lang-key="nav_info">Weitere Infos</a></li>
                  <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="langDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              üåê DE
            </a>
            <ul class="dropdown-menu" aria-labelledby="langDropdown">
              <li><a class="dropdown-item" href="#" onclick="setLanguage('de'); return false;">üá©üá™ Deutsch</a></li>
              <li><a class="dropdown-item" href="#" onclick="setLanguage('en'); return false;">üá∫üá∏ English</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- ‚ñë‚ñë Main content ‚ñë‚ñë------------------------------------------------------ -->
  <main class="container">
    <section class="mb-5">
      <h1 class="display-5 mb-3" data-lang-key="page_title">Low-Cost Experimente mit NV-Zentren</h1>
      
      <div class="row">
        <div class="col-lg-8">
          <h2 class="h4 mb-3" data-lang-key="about_experiment">√úber das Experiment</h2>
          <p data-lang-key="experiment_description">
            Dieses ODMR-Experiment erm√∂glicht es, die faszinierende Welt der Quantenphysik bei Raumtemperatur zu erkunden. 
            Mit NV-Zentren in Diamanten k√∂nnen Magnetfelder mit beispielloser Pr√§zision gemessen werden.
          </p>
          
          <h3 class="h5 mb-3" data-lang-key="how_it_works_title">Wie funktioniert es?</h3>
          <div class="row">
            <div class="col-md-6">
              <div class="card mb-3">
                <div class="card-body">
                  <h6 class="card-title" data-lang-key="step1_title">1. Optische Anregung</h6>
                  <p class="card-text small" data-lang-key="step1_desc">
                    Gr√ºnes Laserlicht (532 nm) regt NV-Zentren an
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card mb-3">
                <div class="card-body">
                  <h6 class="card-title" data-lang-key="step2_title">2. Mikrowellen-Manipulation</h6>
                  <p class="card-text small" data-lang-key="step2_desc">
                    Mikrowellen (~2,87 GHz) manipulieren Spinzust√§nde
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card mb-3">
                <div class="card-body">
                  <h6 class="card-title" data-lang-key="step3_title">3. Fluoreszenz-Detektion</h6>
                  <p class="card-text small" data-lang-key="step3_desc">
                    Rote Fluoreszenz wird mit Photodiode gemessen
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card mb-3">
                <div class="card-body">
                  <h6 class="card-title" data-lang-key="step4_title">4. Magnetfeld-Messung</h6>
                  <p class="card-text small" data-lang-key="step4_desc">
                    Resonanzverschiebung zeigt Magnetfeldst√§rke an
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-lg-4">
          <div class="card">
            <div class="card-header">
              <h6 class="mb-0" data-lang-key="technical_specs">Technische Spezifikationen</h6>
            </div>
            <div class="card-body">
              <ul class="list-unstyled mb-0">
                <li><strong data-lang-key="laser_wavelength">Laserwellenl√§nge:</strong> 532 nm</li>
                <li><strong data-lang-key="microwave_freq">Mikrowellenfrequenz:</strong> ~2,87 GHz</li>
                <li><strong data-lang-key="detection_range">Detektionsbereich:</strong> 600-800 nm</li>
                <li><strong data-lang-key="sensitivity">Sensitivit√§t:</strong> nT/‚àöHz</li>
                <li><strong data-lang-key="temperature_range">Betriebstemperatur:</strong> Raumtemperatur</li>
              </ul>
            </div>
          </div>
          
          <div class="alert alert-info mt-3">
            <h6 class="alert-heading" data-lang-key="did_you_know">Wussten Sie schon?</h6>
            <p class="mb-0 small" data-lang-key="diamond_fact">
              Diamanten sind nicht nur sch√∂n, sondern auch perfekte Quantensensoren! 
              NV-Zentren machen sie zu den pr√§zisesten Magnetometern der Welt.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="mb-5">
      <h2 class="h4 mb-3" data-lang-key="getting_started">Erste Schritte</h2>
      <div class="row">
        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body text-center">
              <h6 class="card-title" data-lang-key="setup_alignment">Aufbau justieren</h6>
              <p class="card-text" data-lang-key="setup_alignment_desc">
                Beginnen Sie mit der Justierung des optischen Aufbaus
              </p>
              <a href="justage.html" class="btn btn-primary btn-sm" data-lang-key="go_to_alignment">Zur Justage</a>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body text-center">
              <h6 class="card-title" data-lang-key="start_measurement">Messung starten</h6>
              <p class="card-text" data-lang-key="start_measurement_desc">
                F√ºhren Sie Ihr erstes ODMR-Experiment durch
              </p>
              <a href="messung.html" class="btn btn-success btn-sm" data-lang-key="go_to_measurement">Zur Messung</a>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card h-100">
            <div class="card-body text-center">
              <h6 class="card-title" data-lang-key="learn_more">Mehr erfahren</h6>
              <p class="card-text" data-lang-key="learn_more_desc">
                Vertiefen Sie Ihr Wissen √ºber Quantenphysik
              </p>
              <div class="d-grid gap-2">
                <a href="https://openuc2.com" class="btn btn-outline-primary btn-sm" target="_blank">openUC2.com</a>
                <a href="https://openuc2.github.io" class="btn btn-outline-secondary btn-sm" target="_blank">Wiki</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <section class="mb-5">
      <div class="card">
        <div class="card-body">
          <h2 class="h4 mb-3" data-lang-key="external_links">Weitere Informationen</h2>
          <div class="row">
            <div class="col-md-6">
              <p data-lang-key="more_info_text">Weitere Infos unter</p>
              <p><a href="https://openuc2.com" target="_blank" data-lang-key="openuc2_link">openuc2.com</a></p>
            </div>
            <div class="col-md-6">
              <p data-lang-key="wiki_text">oder im Wiki unter</p>
              <p><a href="https://openuc2.github.io" target="_blank" data-lang-key="wiki_link">openuc2.github.io</a></p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- ‚ñë‚ñë Footer ‚ñë‚ñë----------------------------------------------------------- -->
  <footer class="py-3 mt-auto">
    <div class="container text-center small">
      <div>Uni M√ºnster ¬∑ openUC2 GmbH ‚Äì <a class="text-white text-decoration-none" href="mailto:hello@openuc2.com">hello@openuc2.com</a></div>
      <div class="mt-1" id="versionInfo" style="opacity: 0.7; font-size: 0.85em;">Loading version...</div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script>
    // Automatic Bootstrap JS loading: Use CDN for development, local for ESP32
    (function() {
      const isLocalDevice = window.location.hostname === '192.168.4.1' || 
                           window.location.hostname.includes('ODMR_') || 
                           window.location.protocol === 'file:';
      
      if (isLocalDevice) {
        // Load from ESP32 local server
        document.write('<script src="/bootstrap.bundle.min.js"><\/script>');
      } else {
        // Load from CDN for development
        document.write('<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"><\/script>');
      }
    })();
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Fetch and display version information
      fetch('/version')
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const contentType = response.headers.get('content-type');
          if (!contentType || !contentType.includes('application/json')) {
            throw new Error('Version endpoint not available');
          }
          return response.json();
        })
        .then(data => {
          const versionInfo = document.getElementById('versionInfo');
          if (versionInfo) {
            versionInfo.textContent = `v${data.version} | Build: ${data.build_date} | ${data.git_hash}`;
          }
        })
        .catch(error => {
          console.error('Error fetching version:', error);
          const versionInfo = document.getElementById('versionInfo');
          if (versionInfo) {
            versionInfo.textContent = 'Version: ESP32 ODMR Server';
          }
        });
    });
  </script>

  <script>
    // Multi-language support
    const translations = {
      de: {
        "nav_start": "Start",
        "nav_measurement_device": "Messung (on Device)",
        "nav_measurement_webserial": "Messung (WebSerial)",
        "nav_alignment": "Justage",
        "nav_info": "Weitere Infos",
        "title": "NV Experimente - Weitere Informationen",
        "page_title": "Low-Cost Experimente mit NV-Zentren",
        "about_experiment": "√úber das Experiment",
        "experiment_description": "Dieses ODMR-Experiment erm√∂glicht es, die faszinierende Welt der Quantenphysik bei Raumtemperatur zu erkunden. Mit NV-Zentren in Diamanten k√∂nnen Magnetfelder mit beispielloser Pr√§zision gemessen werden.",
        "how_it_works_title": "Wie funktioniert es?",
        "step1_title": "1. Optische Anregung",
        "step1_desc": "Gr√ºnes Laserlicht (532 nm) regt NV-Zentren an",
        "step2_title": "2. Mikrowellen-Manipulation",
        "step2_desc": "Mikrowellen (~2,87 GHz) manipulieren Spinzust√§nde",
        "step3_title": "3. Fluoreszenz-Detektion",
        "step3_desc": "Rote Fluoreszenz wird mit Photodiode gemessen",
        "step4_title": "4. Magnetfeld-Messung",
        "step4_desc": "Resonanzverschiebung zeigt Magnetfeldst√§rke an",
        "technical_specs": "Technische Spezifikationen",
        "laser_wavelength": "Laserwellenl√§nge:",
        "microwave_freq": "Mikrowellenfrequenz:",
        "detection_range": "Detektionsbereich:",
        "sensitivity": "Sensitivit√§t:",
        "temperature_range": "Betriebstemperatur:",
        "did_you_know": "Wussten Sie schon?",
        "diamond_fact": "Diamanten sind nicht nur sch√∂n, sondern auch perfekte Quantensensoren! NV-Zentren machen sie zu den pr√§zisesten Magnetometern der Welt.",
        "getting_started": "Erste Schritte",
        "setup_alignment": "Aufbau justieren",
        "setup_alignment_desc": "Beginnen Sie mit der Justierung des optischen Aufbaus",
        "go_to_alignment": "Zur Justage",
        "start_measurement": "Messung starten",
        "start_measurement_desc": "F√ºhren Sie Ihr erstes ODMR-Experiment durch",
        "go_to_measurement": "Zur Messung",
        "learn_more": "Mehr erfahren",
        "learn_more_desc": "Vertiefen Sie Ihr Wissen √ºber Quantenphysik",
        "external_links": "Weitere Informationen",
        "more_info_text": "Weitere Infos unter",
        "openuc2_link": "openuc2.com",
        "wiki_text": "oder im Wiki unter",
        "wiki_link": "openuc2.github.io"
      },
      en: {
        "nav_start": "Start",
        "nav_measurement_device": "Measurement (on Device)",
        "nav_measurement_webserial": "Measurement (WebSerial)",
        "nav_alignment": "Alignment",
        "nav_info": "More Info",
        "title": "NV Experiments - More Information",
        "page_title": "Low-Cost Experiments with NV Centers",
        "about_experiment": "About the Experiment",
        "experiment_description": "This ODMR experiment allows you to explore the fascinating world of quantum physics at room temperature. With NV centers in diamonds, magnetic fields can be measured with unprecedented precision.",
        "how_it_works_title": "How does it work?",
        "step1_title": "1. Optical Excitation",
        "step1_desc": "Green laser light (532 nm) excites NV centers",
        "step2_title": "2. Microwave Manipulation",
        "step2_desc": "Microwaves (~2.87 GHz) manipulate spin states",
        "step3_title": "3. Fluorescence Detection",
        "step3_desc": "Red fluorescence is measured with photodiode",
        "step4_title": "4. Magnetic Field Measurement",
        "step4_desc": "Resonance shift indicates magnetic field strength",
        "technical_specs": "Technical Specifications",
        "laser_wavelength": "Laser wavelength:",
        "microwave_freq": "Microwave frequency:",
        "detection_range": "Detection range:",
        "sensitivity": "Sensitivity:",
        "temperature_range": "Operating temperature:",
        "did_you_know": "Did you know?",
        "diamond_fact": "Diamonds are not only beautiful, but also perfect quantum sensors! NV centers make them the most precise magnetometers in the world.",
        "getting_started": "Getting Started",
        "setup_alignment": "Setup Alignment",
        "setup_alignment_desc": "Start by aligning the optical setup",
        "go_to_alignment": "Go to Alignment",
        "start_measurement": "Start Measurement",
        "start_measurement_desc": "Perform your first ODMR experiment",
        "go_to_measurement": "Go to Measurement",
        "learn_more": "Learn More",
        "learn_more_desc": "Deepen your knowledge of quantum physics",
        "external_links": "Additional Information",
        "more_info_text": "More information at",
        "openuc2_link": "openuc2.com",
        "wiki_text": "or in the wiki at",
        "wiki_link": "openuc2.github.io"
      }
    };
    
    function setLanguage(lang) {
      localStorage.setItem('language', lang);
      updateLanguage(lang);
      
      // Update dropdown display
      const langDropdown = document.getElementById('langDropdown');
      if (langDropdown) {
        langDropdown.innerHTML = `üåê ${lang.toUpperCase()}`;
      }
    }
    
    function updateLanguage(lang) {
      const elements = document.querySelectorAll('[data-lang-key]');
      elements.forEach(element => {
        const key = element.getAttribute('data-lang-key');
        if (translations[lang] && translations[lang][key]) {
          element.textContent = translations[lang][key];
        }
      });
      
      // Update title
      if (translations[lang] && translations[lang].title) {
        document.title = translations[lang].title;
      }
    }
    
    // Initialize language on page load
    document.addEventListener('DOMContentLoaded', function() {
      const savedLang = localStorage.getItem('language') || 'de';
      setLanguage(savedLang);
      
      // Hide WebSerial navigation item if on ESP32
      const isLocalDevice = window.location.hostname === '192.168.4.1' || 
                           window.location.hostname.includes('ODMR_') || 
                           window.location.protocol === 'file:';
      
      if (isLocalDevice) {
        const webSerialNavItem = document.getElementById('webSerialNavItem');
        if (webSerialNavItem) {
          webSerialNavItem.style.display = 'none';
        }
      }
      
      // Fetch and display version information
      fetch('/version')
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const contentType = response.headers.get('content-type');
          if (!contentType || !contentType.includes('application/json')) {
            throw new Error('Version endpoint not available');
          }
          return response.json();
        })
        .then(data => {
          const versionInfo = document.getElementById('versionInfo');
          if (versionInfo) {
            versionInfo.textContent = `v${data.version} | Build: ${data.build_date} | ${data.git_hash}`;
          }
        })
        .catch(error => {
          console.error('Error fetching version:', error);
          const versionInfo = document.getElementById('versionInfo');
          if (versionInfo) {
            versionInfo.textContent = 'Version: ESP32 ODMR Server';
          }
        });
    });
  </script>
</body>
</html>
